{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 mb-0">Scans</h1>
  <a href="{{ url_for('main.create_scan') }}" class="btn btn-success">New Scan</a>
</div>
<div class="card">
  <div class="table-responsive">
    <table class="table mb-0">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Created</th>
          <th>Status</th>
          <th>Findings</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for scan in pagination.items %}
        <tr>
          <td>{{ scan.id }}</td>
          <td>{{ scan.name or '-' }}</td>
          <td>{{ scan.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>{% include 'partials/status_badge.html' with context %}</td>
          <td>{{ scan.findings|length }}</td>
          <td><a href="{{ url_for('main.scan_detail', scan_id=scan.id) }}" class="btn btn-sm btn-outline-primary">View</a></td>
        </tr>
        {% else %}
        <tr>
          <td colspan="6" class="text-center py-4">No scans yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<nav class="mt-3" aria-label="Pagination">
  <ul class="pagination">
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for('main.list_scans', page=pagination.prev_num) }}">Previous</a>
    </li>
    <li class="page-item disabled"><span class="page-link">Page {{ pagination.page }} of {{ pagination.pages or 1 }}</span></li>
    <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for('main.list_scans', page=pagination.next_num) }}">Next</a>
    </li>
  </ul>
</nav>
{% endblock %}
